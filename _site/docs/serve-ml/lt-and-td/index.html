<!DOCTYPE html>




<html
 dir="ltr"
 lang="en"
 class="has-navbar-fixed-top">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content=#ffffff>
    <link rel="stylesheet" href="/assets/css/app.css">
    <link rel="shortcut icon" type="image/png"
           href="/favicon.png" 
    />
    <script defer src="https://unpkg.com/alpinejs@3.9.0/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-social@1/bin/bulma-social.min.css">
    



    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Load Testing with K6 and System Teardown | Don Irwin</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Load Testing with K6 and System Teardown" />
<meta property="og:locale" content="en" />
<meta name="description" content="The demo site for Bulma Clean Theme, made for Jekyll and GitHub pages websites" />
<meta property="og:description" content="The demo site for Bulma Clean Theme, made for Jekyll and GitHub pages websites" />
<link rel="canonical" href="http://localhost:4000/docs/serve-ml/lt-and-td/" />
<meta property="og:url" content="http://localhost:4000/docs/serve-ml/lt-and-td/" />
<meta property="og:site_name" content="Don Irwin" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Load Testing with K6 and System Teardown" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"The demo site for Bulma Clean Theme, made for Jekyll and GitHub pages websites","headline":"Load Testing with K6 and System Teardown","url":"http://localhost:4000/docs/serve-ml/lt-and-td/"}</script>
<!-- End Jekyll SEO tag -->

    <!-- head scripts --><style>
  .menu {
    position: sticky;
    display: inline-block;
    vertical-align: top;
    max-height: 100vh;
    overflow-y: auto;
    width: 400px;
    top: 60px;
    bottom: 0;
    padding: 0px;  
  }

  .content {
    display: inline-block;
  }  
</style>

</head>

  <body>
    <nav class="navbar is-primary  is-fixed-top " x-data="{ openNav: false }">
    <div class="container">
        <div class="navbar-brand">
            <a href="/" class="navbar-item">
                Don Irwin
            </a>
            <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navMenu" :class="{ 'is-active': openNav }" x-on:click="openNav = !openNav">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>
        <div class="navbar-menu" id="navMenu" :class="{ 'is-active': openNav }">
            <div class="navbar-start">
                <a href="/" class="navbar-item ">Home</a>
                
                
                    
                    <a href="/docs/" class="navbar-item ">Featured Repos</a>
                    
                
                
            </div>

            <div class="navbar-end">
                
            </div>

        </div>
    </div>
</nav>

    
        <section class="hero  is-small  is-bold is-primary" >
    <div class="hero-body "  >
        <div class="container">

            <div class="columns is-variable">

                                
                <div class="column is-1">
                    <img src="/img/don_irwin_profile_small.gif">
                </div>
                

                <div class="column">
                    <h1 class="title is-2">Load Testing with K6 and System Teardown</h1>
                    <p class="subtitle is-3">Serve ML Models With FastAPI and K8s</p>

                    
                </div>
            </div>


        </div>
    </div>
</section>
    
    



    <section class="section">
        <div class="container">
            <div class="columns is-multiline">
                
                <div class="column is-4-desktop is-4-tablet">
                    

<aside class="menu">

    <p class="menu-label">World Trade Data Visualization</p>
    <ul class="menu-list">
        
        <li>
            <a href="/docs/data-visualization/overview/" class="">Overview</a>
            
        </li>
        
        <li>
            <a href="/docs/data-visualization/docker/" class="">Running From Docker</a>
            
        </li>
        
        <li>
            <a href="/docs/data-visualization/local-code/" class="">Running From Local Code</a>
            
        </li>
            
    </ul>

    <p class="menu-label">Data Streaming Pipeline</p>
    <ul class="menu-list">
        
        <li>
            <a href="/docs/data-streaming/overview/" class="">Overview</a>
            
        </li>
        
        <li>
            <a href="/docs/data-streaming/first-time/" class="">Running the Very First First Time</a>
            
        </li>
        
        <li>
            <a href="/docs/data-streaming/monitor/" class="">Viewing / Monitoring Stream Progress</a>
            
        </li>
            
    </ul>

    <p class="menu-label">Serve ML Models With FastAPI and K8s</p>
    <ul class="menu-list">
        
        <li>
            <a href="/docs/serve-ml/overview/" class="">Overview</a>
            
        </li>
        
        <li>
            <a href="/docs/serve-ml/video-walkthrough/" class="">End to End Video Walkthrough</a>
            
        </li>
        
        <li>
            <a href="/docs/serve-ml/overview-minikube/" class="">Minikube Environment</a>
            
        </li>
        
        <li>
            <a href="/docs/serve-ml/overview-istio/" class="">Istio Sidecar and Proxy</a>
            
        </li>
        
        <li>
            <a href="/docs/serve-ml/requirements-deps/" class="">System Requirements</a>
            
        </li>
        
        <li>
            <a href="/docs/serve-ml/deps/" class="">Dependencies</a>
            
        </li>
        
        <li>
            <a href="/docs/serve-ml/end-to-end/" class="">Running End to End</a>
            
        </li>
        
        <li>
            <a href="/docs/serve-ml/gh-actions/" class="">Testing With Github Actions</a>
            
        </li>
        
        <li>
            <a href="/docs/serve-ml/lt-and-td/" class="is-active">K6 Testing and Teardown</a>
            
        </li>
            
    </ul>

</aside>
                </div>
                
                <div class="column is-8">
                    
                    

                    
                    
                    
<div class="content">
    <h2 id="what-are-github-actions">What Are <a href="https://docs.github.com/en/actions" target="_blank">Github Actions</a>?</h2>

<p><a href="https://everhour.com/blog/github-actions-tutorial/" target="_blank">Github Actions</a> allow us to automate our CI/CD workflow, software testing, notifications, image and container building building and much more.</p>

<p>We find especially powerful, the fact that githubs platform allocates a container, with up to 6GB of memory and sufficient CPU to perform a lot of testing.</p>

<h2 id="our-merge-test-action"><a href="https://github.com/Don-Irwin/fastapi_ml_k8_k6_gh_actions/blob/main/.github/workflows/merge_main.yml" target="_blank">Our Merge Test Action</a>:</h2>

<p>As discussed prior, the depdencies for this project are pretty extensive.  So we take advantage of Github Actions to test our dependency installer as well as the entire docker image building and publishing pipeline.  If this succeeds, we increase our comfort level that the check-in is clean and ready to be promoted to its next environment.</p>

<p><a href="https://github.com/Don-Irwin/fastapi_ml_k8_k6_gh_actions/blob/main/.github/workflows/merge_main.yml" target="_blank">Our custom github action</a> does the following when a pull request is created to merge the branch <code class="language-plaintext highlighter-rouge">dev</code> into the branch <code class="language-plaintext highlighter-rouge">main</code>:</p>

<ul>
  <li>Tests the dependency installation scripts.</li>
  <li>Tests the core functionality of the ML application.</li>
  <li>Tests the docker builds.</li>
  <li>Tests the minikube deployments.</li>
</ul>

<p>Below is an example of checks being run at the time of creating a pull request from the branch <code class="language-plaintext highlighter-rouge">dev</code> into the branch <code class="language-plaintext highlighter-rouge">main</code>:</p>

<p><img src="/docs/serve-ml/img/github_acctions_pull_request.png" alt="Example of pull request having workflow executed against it." /></p>

<p>Below is an example of the test failing:</p>

<p><img src="/docs/serve-ml/img/github_acctions_error_condition.png" alt="Below is an example of the test failing." /></p>

<p>Below is an example of the test succeeding:</p>

<p><img src="/docs/serve-ml/img/github_acctions_success_condition.png" alt="Below is an example of the test succeeding." /></p>


</div>
                </div>
                
            </div>
        </div>
    </section>
    
        <footer class="footer">
    <div class="container">
        
        

        <!--
             <div class="content is-small has-text-centered">
                <p class="">Theme built by <a href="https://www.csrhymes.com">C.S. Rhymes</a></p>
            </div> 
        -->

    </div>
</footer>

    
    <script src="/assets/js/app.js" type="text/javascript"></script><!-- footer scripts --></body>
</html>
